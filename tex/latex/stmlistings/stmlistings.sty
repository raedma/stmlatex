%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Header                           %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 
% This file includes listings definitions.
% Based upon the listings package:
%   https://ctan.org/pkg/listings
%
% Usage
%  - Preamble:
%    - \usepackage{stmlistings}
% 
% Revisions: 2019-10-27 Martin Raedel <martin.raedel@dlr.de>
%                       Initial draft
%               
% Contact:   Martin Raedel,  martin.raedel@dlr.de
%            DLR Lightweight Systems
%          
%                                 __/|__
%                                /_/_/_/  
%            www.dlr.de/sy/en      |/ DLR
%
% Copyright (C) 2019-... DLR Lightweight Systems
% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Content                          %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Declare that this style file requires at least LaTeX version 2e.
\NeedsTeXFormat{LaTeX2e}

% Provide the name of your page, the date it was last updated, and a comment about what it's used for
\ProvidesPackage{stmlistings}[2023/02/12 STMs custom LaTeX listings definitions]

% ---------------------------
% Package
% ---------------------------

\@ifpackageloaded{listings}{}{\RequirePackage{listings}}%
\@ifpackageloaded{stmcolors}{}{\RequirePackage{stmcolors}}%
\@ifpackageloaded{kvoptions}{}{\RequirePackage{kvoptions}}%

% ---------------------------
% Options
% ---------------------------

\SetupKeyvalOptions{%
  family=stmlistings,%
  prefix=stmlistings@,%
  setkeys=\kvsetkeys,%
}

% Styles
\DeclareBoolOption[true]{styles}

% Environments
\DeclareBoolOption[true]{environments}

% Commands
\DeclareBoolOption[true]{commands}

% Process options
\ProcessKeyvalOptions{stmlistings}

% ---------------------------
% Modules
% ---------------------------

% Styles
\ifstmlistings@styles
  \@ifpackageloaded{stmlistingsstyles}{}{\RequirePackage{stmlistingsstyles}}%
\fi

% Environments
\ifstmlistings@environments
  \@ifpackageloaded{stmlistingsenvironments}{}{\RequirePackage{stmlistingsenvironments}}%
\fi

% Commands
\ifstmlistings@commands
  \@ifpackageloaded{stmlistingscommands}{}{\RequirePackage{stmlistingscommands}}%
\fi

% ---------------------------
% Preferences
% ---------------------------

% http://tex.stackexchange.com/a/64845/44634
\makeatletter
\@ifundefined{KOMAClassName}
  {% true -> no KOMA class
    %
  }%
  {% false -> KOMA class
    \newcaptionname{english}{\lstlistlistingname}{List of \lstlistingname s}%
    \newcaptionname{ngerman}{\lstlistlistingname}{Quelltextverzeichnis}%
  }%
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% That's it                        %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Finally, we'll use \endinput to indicate that LaTeX can stop reading this file. LaTeX will ignore anything after this line.
\endinput